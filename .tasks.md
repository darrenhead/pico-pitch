# Project: PicoSeed - AI SaaS Opportunity Hunter

**Version:** 0.1
**Date:** [Current Date]
**Author:** darrenhead

## 1. Vision & Goal

**PicoSeed** aims to be an AI-driven system that automatically scrapes online communities (initially Reddit) to identify user pain points and unmet needs. It then leverages AI (Gemini) to analyze these, brainstorm potential SaaS/micro-SaaS solutions, and generate foundational development planning documents (BRD, PRD, Agile Stories/Tasks) for an AI coding agent. The system will store outputs in Supabase and also export key documents as local Markdown files.

The primary goal of **PicoSeed** is to systematically discover viable SaaS business opportunities and accelerate the initial stages of product definition and planning, providing flexible output formats.

## 2. Core Technologies

- **Backend & Orchestration:** Python
- **Reddit Interaction:** PRAW (Python Reddit API Wrapper)
- **AI Language Model:** Google Gemini (via `google-generativeai` Python SDK)
- **Database & BaaS:** Supabase (including Supabase Auth, Database (Postgres), Storage, Edge Functions where appropriate)
- **Frontend Dashboard (Optional but Recommended):** Next.js, Tailwind CSS, Shadcn/ui
- **Deployment (Frontend):** Vercel
- **Web Crawling (Optional Future):** Firecrawl

## 3. System Architecture Overview

**PicoSeed** will operate as an **Agent Orchestrator Workflow**, managed by a central Python application.

1.  **Phase 1: Discovery & Initial Triage (Python Agent + PRAW + Gemini)**
    - **Agent 1a: Reddit Scraper & Generic Pain Point Catcher:** Scrapes Reddit based on configured subreddits and broad keywords. Stores raw findings in Supabase.
    - **Agent 1b: Problem Extractor & Initial Categorizer:** Uses Gemini to analyze raw findings, summarize the problem, identify its domain, and assess SaaS potential. Updates Supabase.
2.  **Phase 2: Thematic Grouping & Opportunity Definition (Python Agent + Gemini + Human Review via UI)**
    - **Agent 2a: Thematic Analyzer (Orchestrator Logic):** Groups related problems by domain or semantic similarity from Supabase.
    - **Agent 2b: Business Opportunity Identifier:** Uses Gemini to define a potential SaaS opportunity (description, target user, value prop) based on extracted problems/themes. Updates Supabase.
3.  **Phase 3: Solution Design & Documentation (Python Agent + Gemini + Human Selection via UI)**
    - **Agent 3a: Solution Concept Generator:** Uses Gemini to brainstorm multiple high-level solution concepts for a defined opportunity. Updates Supabase.
    - **(Human Checkpoint via UI):** User reviews and selects one preferred solution concept.
    - **Agent 3b: BRD Drafter:** Uses Gemini to generate a Business Requirements Document (BRD) in Markdown. Stores in Supabase **and saves as a local `.md` file.**
    - **Agent 3c: PRD Drafter:** Uses Gemini to generate a Product Requirements Document (PRD) in Markdown. Stores in Supabase **and saves as a local `.md` file.**
    - **Agent 3d: Agile Breakdown Master:** Uses Gemini with a highly specific prompt to generate a detailed Agile plan (Epics, Stories, Tasks, 1-point Subtasks) in Markdown. Stores in Supabase **and saves as a local `.md` file.**

## 4. Key Components & Modules

### 4.1. Python Orchestrator & Agents

- **`orchestrator.py` (Main Application for PicoSeed):**
  - Manages the overall workflow and state transitions.
  - Schedules and triggers agents.
  - Handles configuration (subreddits, API keys, prompts).
  - Interacts with Supabase for data persistence and state management.
  - Manages file paths for saving local Markdown outputs.
- **`reddit_scraper_agent.py`:**
  - Uses PRAW to connect to Reddit.
  - Fetches posts and comments based on configuration.
  - Applies initial keyword filtering.
  - Saves raw leads to Supabase (`raw_leads` table).
  - Handles API rate limiting and error handling.
- **`gemini_interaction_agent.py`:**
  - Uses the `google-generativeai` Python SDK.
  - Contains functions to call the appropriate Gemini model (e.g., `gemini-pro`) for various tasks:
    - Problem Extraction & Categorization
    - Opportunity Identification
    - Solution Brainstorming
    - BRD Generation
    - PRD Generation
    - Agile Breakdown Generation
  - Manages prompt templates.
  - Handles API responses and error handling.
- **`database_manager.py` (or integrated into orchestrator):**
  - Handles all Supabase interactions (CRUD operations).
  - Defines data models/schemas implicitly.
- **`file_exporter.py` (New Module or integrated into orchestrator/agents):**
  - Contains functions to save text content (Markdown) to local files.
  - Handles file naming conventions (e.g., based on opportunity ID, document type, version).
  - Manages output directories.

### 4.2. Supabase Database Schema (Conceptual)

- **`raw_leads`:**
  - `id` (PK), `reddit_id` (TEXT, unique), `permalink` (TEXT), `subreddit` (TEXT), `title` (TEXT, nullable), `body_text` (TEXT), `is_comment` (BOOLEAN), `scraped_at` (TIMESTAMP), `status` (TEXT - e.g., 'new_raw_lead', 'problem_extraction_failed', 'problem_extracted'), `gemini_problem_summary` (TEXT, nullable), `gemini_problem_domain` (TEXT, nullable), `gemini_saas_potential_flag` (TEXT, nullable), `gemini_frustration_level` (TEXT, nullable)
- **`opportunities`:**
  - `id` (PK), `based_on_lead_ids` (ARRAY of INT/UUID, FK to raw_leads, optional), `title` (TEXT, user-defined or AI-suggested), `problem_summary_consolidated` (TEXT), `opportunity_description_ai` (TEXT), `target_user_ai` (TEXT), `value_proposition_ai` (TEXT), `domain_relevance_ai` (TEXT), `status` (TEXT - e.g., 'opportunity_defined', 'solutions_brainstormed', 'solution_selected_for_planning'), `selected_solution_concept_json` (JSONB, nullable)
- **`solution_concepts`:**
  - `id` (PK), `opportunity_id` (FK to opportunities), `concept_name` (TEXT), `core_features_json` (JSONB - array of strings), `ai_generated_at` (TIMESTAMP)
- **`documents`:**
  - `id` (PK), `opportunity_id` (FK to opportunities), `document_type` (TEXT - 'BRD', 'PRD', 'AGILE_PLAN'), `content_markdown` (TEXT), `version` (INT), `created_at` (TIMESTAMP), `last_updated_at` (TIMESTAMP), `local_file_path` (TEXT, nullable)
- **`configuration` (Optional):**
  - `key` (TEXT, PK), `value` (JSONB) - For storing scraper settings, etc.

### 4.3. Next.js Frontend Dashboard (Optional for PicoSeed)

- **Purpose:** Human-in-the-loop interface for review, selection, and minor configuration of **PicoSeed** outputs.
- **Key Pages/Views:**
  - Dashboard Overview (stats, pending actions)
  - Raw Leads Viewer (filterable, sortable)
  - Processed Leads / Potential Opportunities (with Gemini insights)
  - Opportunity Detail View (for reviewing AI-generated opportunity, solution concepts)
  - Document Viewer/Editor (for BRD, PRD, Agile Plan Markdown)
  - Configuration Page (to manage subreddits, keywords - advanced)
- **Interaction:** Reads from and writes to Supabase. Triggers backend actions via API routes (if needed for complex operations not directly handled by Python orchestrator).

## 5. Project Documentation (README for PicoSeed)

- [ ] **M-DOC.1: Create Initial `README.md` File for PicoSeed**
  - **Content to Include (Initial Draft):**
    - Project Title: **PicoSeed - AI SaaS Opportunity Hunter**
    - Brief Description
    - Core Technologies Used
    - Prerequisites (Python version, Node.js version, Supabase account, Gemini API Key, Reddit API credentials)
    - Setup Instructions:
      - Cloning the repository
      - Setting up Python virtual environment (`venv`)
      - Installing Python dependencies (`requirements.txt`)
      - Environment variable setup (`.env` file for API keys and Supabase credentials)
      - Supabase project setup (briefly, or link to Supabase docs for creating a project and tables â€“ schema can be documented or scripted later)
    - Basic Usage Instructions (how to run the main **PicoSeed** orchestrator script).
    - Project Structure Overview (brief description of key directories and files).
- [ ] **M-DOC.2: Update `README.md` - Phase 0 Completion**
  - Add details on running the MVP scraper with `argparse`.
  - Explain how to manually test with Gemini.
- [ ] **M-DOC.3: Update `README.md` - Phase 1 Completion**
  - Detail how the automated Gemini problem extraction works.
  - Explain any new environment variables or setup for Gemini SDK.
- [ ] **M-DOC.4: Update `README.md` - Phase 2 Completion**
  - Explain how opportunity identification and thematic analysis (if basic version implemented) work.
  - If Next.js UI started: add setup and run instructions for the frontend.
- [ ] **M-DOC.5: Update `README.md` - Phase 3 Completion**
  - Explain the full document generation pipeline (BRD, PRD, Agile Plan).
  - Detail the local file output structure.
  - Update Next.js UI instructions if applicable.
- [ ] **M-DOC.6: Ongoing `README.md` Maintenance**
  - Ensure README is kept up-to-date with any significant changes to setup, configuration, or functionality throughout all development phases of **PicoSeed**.

## 6. Development Phases & Milestones for PicoSeed

### Phase 0: MVP Scraper & Manual Gemini Testing

    *   [x] **M0.1:** Setup Python environment, PRAW, Supabase client, `google-generativeai` SDK.
    *   [x] **M0.2:** Create basic `raw_leads` table in Supabase. (Provided `schema.sql` for manual setup).
    *   [x] **M0.3:** Implement core Python scraper script to fetch posts/comments and store in `raw_leads`.
        *   [x] Task: Implement `argparse` for command-line control.
    *   [ ] **M0.4:** Manually test promising leads with Gemini "Problem Extractor" prompt. Iterate on prompt.
    *   [x] **Task (from M-DOC.1): Create Initial `README.md` file for PicoSeed.**
    *   **Goal:** Get raw data flowing, validate initial Gemini prompt, and document basic setup for **PicoSeed**.

### Phase 1: Automated Initial Processing

    *   [x] **M1.1:** Integrate Gemini "Problem Extractor & Initial Categorizer" agent into Python orchestrator.
    *   [x] **M1.2:** Basic logging and error handling.
    *   [x] **Task (from M-DOC.2 & M-DOC.3): Update `README.md`.**
    *   **Goal:** Automate the first layer of AI analysis and document it.

### Phase 2: Opportunity Definition & UI for Review

    *   [x] **M2.1:** Implement Gemini "Business Opportunity Identifier" agent.
    *   [ ] **M2.2 (Parallel):** Start basic Next.js dashboard.
        *   [ ] Task: Display `raw_leads` and `opportunities` (with Gemini insights) from Supabase. Allow filtering/sorting.
    *   [x] **Task (from M-DOC.4): Update `README.md`.**
    *   **Goal:** Generate initial SaaS ideas, provide a review UI, and document.

### Phase 3: Solution Design & Documentation Generation (with Local File Export)

    *   [x] **M3.1:** Implement Gemini "Solution Concept Generator" agent. Store concepts in Supabase.
    *   [ ] **M3.2:** Add UI functionality in Next.js for user to review and select a preferred solution concept for an opportunity.
    *   [x] **M3.3:** Implement Gemini "BRD Drafter" agent.
        *   [x] Task: Store BRD Markdown in `documents` table in Supabase.
        *   [x] Task: Implement logic to save BRD as a local `.md` file (e.g., `output/opportunity_X/BRD_v1.md`). Store file path in Supabase.
    *   [x] **M3.4:** Implement Gemini "PRD Drafter" agent.
        *   [x] Task: Store PRD Markdown in Supabase.
        *   [x] Task: Implement logic to save PRD as a local `.md` file. Store file path.
    *   [x] **M3.5:** Implement Gemini "Agile Breakdown Master" agent using the detailed prompt.
        *   [x] Task: Store Agile Plan Markdown in Supabase.
        *   [x] Task: Implement logic to save Agile Plan as a local `.md` file. Store file path.
    *   [ ] **M3.6:** Enhance Next.js UI to display generated documents (and potentially link to local files if paths are known/consistent).
    *   [x] **Task (from M-DOC.5): Update `README.md`.**
    *   **Goal:** Full pipeline from problem to detailed Agile plan, with outputs in Supabase and as local Markdown files.

### Phase 4: Refinements & Advanced Features for PicoSeed

    *   [ ] **M4.1:** Implement Thematic Analyzer logic in orchestrator (grouping by domain, keyword analysis on summaries).
    *   [ ] **M4.2:** (Optional) Explore semantic similarity (embeddings, pgvector) for more advanced thematic clustering.
    *   [ ] **M4.3:** Improve Next.js dashboard: editing capabilities for documents, better configuration management for scraper.
    *   [ ] **M4.4:** Robust error handling, retry mechanisms, monitoring.
    *   [ ] **M4.5:** (Optional) Integrate Firecrawl for targeted non-Reddit scraping.
    *   [ ] **Task (from M-DOC.6): Ongoing `README.md` maintenance.**
    *   **Goal:** Make **PicoSeed** more intelligent, robust, and user-friendly.

## 7. Key Prompts for Gemini (To be refined)

- **Problem Extractor & Initial Categorizer:**

  ```
  Analyze the following user-generated text from an online forum.
  Text: "[raw_text]"

  1.  Identify the core problem or pain point being expressed. If no clear problem, state "No clear problem."
  2.  Summarize this problem in 1-2 concise sentences.
  3.  What is the apparent domain or niche of this problem (e.g., "Project Management," "Social Media Marketing," "Restaurant Operations," "Software Development Tooling," "Personal Productivity," "Translation Services," "Digital Signage," etc.)? If unclear, state "General Business Problem" or "General Consumer Problem."
  4.  Does this problem seem solvable by a software (SaaS) solution? (Yes/No/Uncertain)
  5.  Estimate the intensity of the user's frustration (Low, Medium, High).

  Output your response as a JSON object with keys: "problem_summary", "problem_domain", "saas_potential_flag", "frustration_level".
  ```

- **Business Opportunity Identifier:**

  ```
  Given the user problem:
  Summary: "[problem_summary]"
  Domain: "[problem_domain]"

  1.  Describe a potential micro-SaaS or niche SaaS business opportunity that could address this specific problem.
  2.  Who would be the primary target user/customer for this SaaS?
  3.  What is the core value proposition for this SaaS?
  4.  Is this opportunity related to Translation, Digital Signage, Menus, or Restaurant tech? If so, specify which. If not, state "General SaaS Opportunity."

  Output as a JSON object with keys: "opportunity_description", "target_user", "value_proposition", "domain_relevance".
  ```

- **Solution Concept Generator:**

  ```
  For the SaaS opportunity:
  Opportunity: "[opportunity_description]"
  Target User: "[target_user]"
  Value Proposition: "[value_proposition]"

  Brainstorm 1-3 distinct high-level solution concepts for a SaaS product. For each concept:
  - Give it a conceptual name.
  - List 3-5 core features.
  Output as a JSON array, where each object has "concept_name" and "core_features" (array of strings).
  ```

- **BRD Drafter:**

  ```
  Based on this SaaS opportunity:
  Problem: "[pain_point_summary from original lead]"
  Opportunity: "[opportunity_description]"
  Target User: "[target_user]"
  Value Proposition: "[value_proposition]"
  Selected Solution Concept: "[concept_name]" with features: [core_features list]

  Draft a concise Business Requirements Document (BRD) in Markdown. Include sections for:
  1. Introduction & Business Problem
  2. Proposed Solution (based on the selected concept)
  3. Business Objectives & Goals
  4. Scope (In-scope/Out-of-scope high level)
  5. Target Audience/Market
  6. High-Level Business Requirements (derived from features)
  7. Success Metrics & KPIs
  ```

- **PRD Drafter:**

  ```
  Using the following BRD and solution details:
  BRD: "[BRD_markdown_content]"
  Solution Concept: "[concept_name]" with features: [core_features list]

  Draft a Product Requirements Document (PRD) in Markdown. Include sections for:
  1. Introduction (Problem, Solution Overview)
  2. Goals & Objectives (Product-specific)
  3. Target Users & Personas (elaborate if possible)
  4. Product Features (expand on core features with more detail, consider user flow implications)
  5. User Stories (3-5 key high-level user stories)
  6. Design Considerations (briefly)
  7. Technical Considerations (briefly, e.g., platform, integrations)
  8. Release Criteria (high level)
  9. Future Considerations (optional)
  ```

- **Agile Breakdown Master:**

  ```
  You are an expert Agile Product Owner and Technical Lead, preparing a detailed development plan for a very competent AI Coding Agent.
  Based on the following PRD:
  [PRD_markdown_content]

  The AI Coding Agent will be implementing this application using the following technology stack:
  - Frontend: Next.js (Pages Router or App Router as appropriate), React, Tailwind CSS, Shadcn/ui
  - Backend Logic (if not directly in Next.js API routes): Python (potentially for complex orchestrations or standalone tasks for PicoSeed)
  - Database & BaaS: Supabase (PostgreSQL for database, Supabase Auth for authentication, Supabase Storage for file storage, Supabase Edge Functions for serverless functions where applicable). The AI agent should leverage the Supabase client libraries (e.g., `supabase-js` for frontend, `supabase-py` for Python backend).
  - Deployment: Frontend on Vercel.

  Please create a VERY VERY detailed markdown checklist of all the stories for this project plan, with one-story-point tasks (with unchecked checkboxes) that break down each story. It is critically important that all of the details to implement this, *keeping the specified technology stack in mind for each subtask*, are in the list. For example, if a task involves user authentication, a subtask should explicitly mention using Supabase Auth. If data needs to be saved, subtasks should refer to creating Supabase tables or calling Supabase client methods.

  Note that the AI Coding Agent will use this list to autonomously create this application's functionality, so be sure not to miss any details whatsoever, no matter how much time and thinking you must do to complete this very challenging but critically important task.

  Follow this hierarchy strictly:
  ## Epic: [Descriptive Epic Title related to a major PRD feature/goal]
  ### User Story: [As a <USER_TYPE>, I want to <ACTION>, so that <BENEFIT>] (Estimate: X pts - estimate the story overall, can be >1)
  #### Task: [Developer-focused task to implement part of the story, can be a logical grouping of subtasks, e.g., "Implement User Authentication UI and Logic"]
  - [ ] Subtask: [Frontend: Create Next.js page for login using Shadcn/ui components.] (1 pt)
  - [ ] Subtask: [Frontend: Implement form handling for email/password input.] (1 pt)
  - [ ] Subtask: [Frontend: Call Supabase Auth `signInWithPassword` method using `supabase-js`.] (1 pt)
  - [ ] Subtask: [Backend/Supabase: Ensure users table and RLS policies are set up for auth.] (1 pt)
  - [ ] Subtask: [Frontend: Handle successful login and redirect user.] (1 pt)
  - [ ] Subtask: [Frontend: Display error messages from Supabase Auth on login failure.] (1 pt)
  ... (repeat for all subtasks under this task, ensuring they are 1 point and tech-specific)
  ... (repeat for all tasks under this user story)
  ... (repeat for all user stories under this epic)
  ... (repeat for all epics needed to deliver the PRD)

  Prioritize based on core value suggested in the PRD.
  Output ONLY the Markdown.
  ```

## 8. Considerations & Challenges

- **Prompt Engineering:** Critical for quality AI outputs. Requires significant iteration.
- **Reddit API Rate Limits:** Must be handled carefully.
- **Cost Management:** Gemini API usage costs.
- **Noise vs. Signal:** Filtering out irrelevant Reddit content.
- **Scalability:** Handling large volumes of data and processing for **PicoSeed**.
- **Human Oversight:** Ensuring AI outputs are sensible and useful; defining clear human checkpoints.
- **Maintaining State:** Ensuring the orchestrator correctly tracks the status of each idea through the pipeline.
- **File Management:** Ensuring local Markdown files are saved correctly, named consistently, and potentially versioned or overwritten appropriately. Defining a clear output directory structure.

## 9. Next Steps (Immediate)

1.  Complete **Phase 0: MVP Scraper & Manual Gemini Testing** for **PicoSeed**.
    - Start with **M-DOC.1: Create Initial `README.md` File for PicoSeed** alongside M0.1-M0.3.
2.  Setup basic project repository (e.g., GitHub) for **PicoSeed**.
3.  Design initial file/directory structure for local Markdown outputs (e.g., `project_root/picoseed_outputs/[opportunity_id]/[document_type]_v[version].md`).

---
